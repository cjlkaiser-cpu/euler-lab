<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Euler Lab - 100 Problemas de Project Euler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .serif { font-family: 'Source Serif 4', Georgia, serif; }

        .card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card:hover {
            transform: translateY(-6px);
        }
        .card:hover .card-glow {
            opacity: 1;
        }
        .card-glow {
            position: absolute;
            inset: -1px;
            border-radius: 1rem;
            background: linear-gradient(135deg, var(--glow-from), var(--glow-to));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
            filter: blur(1px);
        }

        .preview-canvas {
            image-rendering: pixelated;
        }

        .problem-number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            letter-spacing: 0.15em;
        }

        .difficulty-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        /* Glow colors per category */
        .cat-numbers { --glow-from: #3b82f6; --glow-to: #1d4ed8; }
        .cat-sequences { --glow-from: #22c55e; --glow-to: #15803d; }
        .cat-primes { --glow-from: #a855f7; --glow-to: #7c3aed; }
        .cat-combinatorics { --glow-from: #f59e0b; --glow-to: #d97706; }
        .cat-strings { --glow-from: #ec4899; --glow-to: #be185d; }

        .tag-numbers { background: rgba(59, 130, 246, 0.15); color: #60a5fa; }
        .tag-sequences { background: rgba(34, 197, 94, 0.15); color: #4ade80; }
        .tag-primes { background: rgba(168, 85, 247, 0.15); color: #c084fc; }
        .tag-combinatorics { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
        .tag-strings { background: rgba(236, 72, 153, 0.15); color: #f472b6; }
    </style>
</head>
<body class="bg-black text-gray-100 min-h-screen">
    <!-- Header -->
    <header class="border-b border-gray-900/50 bg-black/80 backdrop-blur-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <nav class="text-xs text-gray-600 mb-1">
                        <a href="../../_portal/index.html" class="hover:text-blue-400 transition">EigenLab</a>
                        <span class="mx-1.5 text-gray-800">/</span>
                        <span class="text-gray-500">Euler Lab</span>
                    </nav>
                    <h1 class="text-2xl font-light tracking-tight">
                        <span class="text-blue-400 font-medium">Euler</span> Lab
                    </h1>
                    <p class="text-gray-600 text-sm mono mt-0.5">100 problemas, 4 niveles cada uno</p>
                </div>
                <div class="flex items-center gap-4">
                    <div class="text-right">
                        <div class="text-xs text-gray-600">Progreso</div>
                        <div class="mono text-sm"><span class="text-blue-400">0</span><span class="text-gray-700">/100</span></div>
                    </div>
                    <a href="https://projecteuler.net" target="_blank" class="text-gray-600 hover:text-white transition text-xs mono">
                        projecteuler.net
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 py-12">
        <!-- Hero -->
        <section class="text-center mb-16">
            <h2 class="text-4xl font-light mb-4 serif">
                Matemáticas <span class="text-blue-400">computacionales</span>
            </h2>
            <p class="text-gray-500 max-w-2xl mx-auto leading-relaxed">
                Cada problema tiene 4 niveles de solución: a mano, fuerza bruta, pythónico y matemático.
                Ejecuta código Python directamente en el navegador.
            </p>
        </section>

        <!-- Filters -->
        <section class="flex justify-center gap-2 mb-10 flex-wrap">
            <button class="filter-btn active px-3 py-1.5 rounded-full text-xs mono border border-gray-800 bg-gray-900 text-gray-300 hover:border-gray-700 transition" data-filter="all">
                Todos
            </button>
            <button class="filter-btn px-3 py-1.5 rounded-full text-xs mono border border-gray-800 hover:border-blue-500/50 hover:text-blue-400 transition" data-filter="numbers">
                Números
            </button>
            <button class="filter-btn px-3 py-1.5 rounded-full text-xs mono border border-gray-800 hover:border-green-500/50 hover:text-green-400 transition" data-filter="sequences">
                Secuencias
            </button>
            <button class="filter-btn px-3 py-1.5 rounded-full text-xs mono border border-gray-800 hover:border-purple-500/50 hover:text-purple-400 transition" data-filter="primes">
                Primos
            </button>
            <button class="filter-btn px-3 py-1.5 rounded-full text-xs mono border border-gray-800 hover:border-amber-500/50 hover:text-amber-400 transition" data-filter="combinatorics">
                Combinatoria
            </button>
        </section>

        <!-- Problems Grid -->
        <section class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5" id="problems-grid">

            <!-- Problem 001 -->
            <a href="problems/001/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-001" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#001</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Múltiplos de 3 y 5</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Suma todos los múltiplos de 3 o 5 menores que 1000.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 002 -->
            <a href="problems/002/index.html" class="block">
                <article class="card cat-sequences relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="sequences">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-002" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#002</span>
                            <span class="tag-sequences text-[10px] px-2 py-0.5 rounded-full mono">SECUENCIAS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Fibonacci pares</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Suma los términos pares de Fibonacci menores que 4 millones.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 003 -->
            <a href="problems/003/index.html" class="block">
                <article class="card cat-primes relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="primes">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-003" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#003</span>
                            <span class="tag-primes text-[10px] px-2 py-0.5 rounded-full mono">PRIMOS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Factor primo mayor</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Encuentra el factor primo más grande de 600851475143.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 004 -->
            <a href="problems/004/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-004" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#004</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Palíndromo más grande</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Mayor palíndromo producto de dos números de 3 dígitos.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 005 -->
            <a href="problems/005/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-005" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#005</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Mínimo común múltiplo</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Menor número divisible por todos del 1 al 20.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 006 -->
            <a href="problems/006/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-006" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#006</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Suma vs cuadrado</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Diferencia entre cuadrado de suma y suma de cuadrados.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 007 -->
            <a href="problems/007/index.html" class="block">
                <article class="card cat-primes relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="primes">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-007" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#007</span>
                            <span class="tag-primes text-[10px] px-2 py-0.5 rounded-full mono">PRIMOS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Primo 10001</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Encuentra el primo número 10001.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 008 -->
            <a href="problems/008/index.html" class="block">
                <article class="card cat-strings relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="strings">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-008" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#008</span>
                            <span class="tag-strings text-[10px] px-2 py-0.5 rounded-full mono">STRINGS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Producto en serie</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Mayor producto de 13 dígitos adyacentes en un número.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-yellow-500"></span>
                                <span class="difficulty-dot bg-yellow-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 009 -->
            <a href="problems/009/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-009" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#009</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Triplete pitagórico</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Triplete pitagórico donde a + b + c = 1000.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 010 -->
            <a href="problems/010/index.html" class="block">
                <article class="card cat-primes relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="primes">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-010" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#010</span>
                            <span class="tag-primes text-[10px] px-2 py-0.5 rounded-full mono">PRIMOS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Suma de primos</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Suma de todos los primos menores que 2 millones.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 011 -->
            <a href="problems/011/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-011" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#011</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Producto en cuadrícula</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Mayor producto de 4 números adyacentes en una cuadrícula 20×20.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 012 -->
            <a href="problems/012/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-012" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#012</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Número triangular</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Primer número triangular con más de 500 divisores.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 013 -->
            <a href="problems/013/index.html" class="block">
                <article class="card cat-strings relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="strings">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-013" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#013</span>
                            <span class="tag-strings text-[10px] px-2 py-0.5 rounded-full mono">STRINGS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Suma grande</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Primeros 10 dígitos de la suma de 100 números de 50 dígitos.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 014 -->
            <a href="problems/014/index.html" class="block">
                <article class="card cat-sequences relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="sequences">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-014" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#014</span>
                            <span class="tag-sequences text-[10px] px-2 py-0.5 rounded-full mono">SECUENCIAS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Secuencia Collatz</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Número bajo 1 millón que produce la cadena Collatz más larga.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 015 -->
            <a href="problems/015/index.html" class="block">
                <article class="card cat-combinatorics relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="combinatorics">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-015" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#015</span>
                            <span class="tag-combinatorics text-[10px] px-2 py-0.5 rounded-full mono">COMBINATORIA</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Caminos en cuadrícula</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Rutas en una cuadrícula 20×20 moviéndose solo derecha y abajo.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 016 -->
            <a href="problems/016/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-016" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#016</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Suma de dígitos de potencia</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Suma de los dígitos de 2¹⁰⁰⁰.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 017 -->
            <a href="problems/017/index.html" class="block">
                <article class="card cat-strings relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="strings">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-017" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#017</span>
                            <span class="tag-strings text-[10px] px-2 py-0.5 rounded-full mono">STRINGS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Letras en números</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Total de letras al escribir del 1 al 1000 en palabras.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-yellow-500"></span>
                                <span class="difficulty-dot bg-yellow-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 018 -->
            <a href="problems/018/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-018" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#018</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Ruta máxima en triángulo</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Suma máxima recorriendo un triángulo de arriba a abajo.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 019 -->
            <a href="problems/019/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-019" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#019</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Contando domingos</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Domingos que cayeron en día 1 del mes en el siglo XX.</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

            <!-- Problem 020 -->
            <a href="problems/020/index.html" class="block">
                <article class="card cat-numbers relative bg-gray-950 border border-gray-900/80 rounded-2xl overflow-hidden" data-category="numbers">
                    <div class="card-glow"></div>
                    <div class="p-4">
                        <canvas id="preview-020" class="preview-canvas w-full h-28 bg-black rounded-lg mb-3"></canvas>
                        <div class="flex items-center justify-between mb-2">
                            <span class="problem-number text-gray-600">#020</span>
                            <span class="tag-numbers text-[10px] px-2 py-0.5 rounded-full mono">NÚMEROS</span>
                        </div>
                        <h3 class="font-medium text-[15px] mb-1 leading-snug">Suma dígitos factorial</h3>
                        <p class="text-gray-500 text-xs leading-relaxed mb-3">Suma de los dígitos de 100!</p>
                        <div class="flex items-center justify-between">
                            <div class="flex gap-1">
                                <span class="difficulty-dot bg-green-500"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                                <span class="difficulty-dot bg-green-500/30"></span>
                            </div>
                            <span class="text-[10px] text-gray-600 mono">5%</span>
                        </div>
                    </div>
                </article>
            </a>

        </section>

        <!-- Coming soon -->
        <section class="mt-16 text-center">
            <p class="text-gray-700 text-sm">
                <span class="mono text-gray-600">021-100</span> próximamente
            </p>
        </section>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-900/50 mt-20">
        <div class="max-w-6xl mx-auto px-6 py-8">
            <div class="flex justify-between items-center text-xs text-gray-600">
                <p>Problemas de <a href="https://projecteuler.net" target="_blank" class="text-gray-500 hover:text-white transition">Project Euler</a></p>
                <p class="mono">eigenlab / mathematics / euler-lab</p>
            </div>
        </div>
    </footer>

    <!-- Canvas Animations -->
    <script>
        const dpr = window.devicePixelRatio || 1;

        function setupCanvas(id) {
            const canvas = document.getElementById(id);
            if (!canvas) return null;
            const ctx = canvas.getContext('2d');
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            return { canvas, ctx, w: rect.width, h: rect.height };
        }

        // 001: Múltiplos de 3 y 5 - Barras que se iluminan
        (function() {
            const c = setupCanvas('preview-001');
            if (!c) return;
            const { ctx, w, h } = c;
            let offset = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const cols = 30;
                const barW = w / cols - 1;

                for (let i = 1; i <= cols; i++) {
                    const n = i + offset;
                    const is3 = n % 3 === 0;
                    const is5 = n % 5 === 0;
                    const is15 = n % 15 === 0;

                    let color = '#1a1a24';
                    if (is15) color = '#7c3aed';
                    else if (is3) color = '#3b82f6';
                    else if (is5) color = '#22c55e';

                    const barH = (is3 || is5) ? h * 0.7 : h * 0.3;
                    const x = (i - 1) * (barW + 1);
                    const y = h - barH - 10;

                    ctx.fillStyle = color;
                    ctx.fillRect(x, y, barW, barH);

                    // Number label
                    if (cols <= 30) {
                        ctx.fillStyle = '#4b5563';
                        ctx.font = '8px JetBrains Mono';
                        ctx.textAlign = 'center';
                        ctx.fillText(n, x + barW/2, h - 2);
                    }
                }
            }

            draw();
            setInterval(() => { offset = (offset + 1) % 100; draw(); }, 200);
        })();

        // 002: Fibonacci - Espiral
        (function() {
            const c = setupCanvas('preview-002');
            if (!c) return;
            const { ctx, w, h } = c;

            const fib = [1, 1];
            for (let i = 2; i < 12; i++) fib.push(fib[i-1] + fib[i-2]);
            let phase = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Draw fibonacci boxes
                const scale = 4;
                let x = w/2, y = h/2;
                let dir = 0;

                for (let i = 0; i < 8; i++) {
                    const size = fib[i] * scale;
                    const isEven = fib[i] % 2 === 0;
                    const alpha = (i + phase) % 8 < 4 ? 0.8 : 0.3;

                    ctx.strokeStyle = isEven ? `rgba(34, 197, 94, ${alpha})` : `rgba(75, 85, 99, ${alpha * 0.5})`;
                    ctx.lineWidth = isEven ? 2 : 1;
                    ctx.strokeRect(x, y, size, size);

                    if (isEven) {
                        ctx.fillStyle = `rgba(34, 197, 94, ${alpha * 0.1})`;
                        ctx.fillRect(x, y, size, size);
                    }

                    // Move to next position
                    if (dir === 0) x += size;
                    else if (dir === 1) y += size;
                    else if (dir === 2) { x -= fib[i+1] * scale; }
                    else { y -= fib[i+1] * scale; }
                    dir = (dir + 1) % 4;
                }
            }

            draw();
            setInterval(() => { phase = (phase + 1) % 8; draw(); }, 400);
        })();

        // 003: Primos - Factorización
        (function() {
            const c = setupCanvas('preview-003');
            if (!c) return;
            const { ctx, w, h } = c;

            const primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37];
            let highlight = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Tree-like factorization
                ctx.strokeStyle = '#334155';
                ctx.lineWidth = 1;

                // Central number
                ctx.fillStyle = '#a855f7';
                ctx.font = 'bold 14px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('600851475143', w/2, 20);

                // Factor branches
                const factors = [71, 839, 1471, 6857];
                const startY = 35;

                factors.forEach((f, i) => {
                    const x = 30 + i * ((w - 60) / 3);
                    const isHighlight = i === highlight;

                    ctx.beginPath();
                    ctx.moveTo(w/2, 25);
                    ctx.lineTo(x, startY + 15);
                    ctx.strokeStyle = isHighlight ? '#a855f7' : '#334155';
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.arc(x, startY + 25, 12, 0, Math.PI * 2);
                    ctx.fillStyle = isHighlight ? '#a855f7' : '#1e1e2e';
                    ctx.fill();
                    ctx.strokeStyle = isHighlight ? '#c084fc' : '#4b5563';
                    ctx.stroke();

                    ctx.fillStyle = isHighlight ? '#fff' : '#9ca3af';
                    ctx.font = '9px JetBrains Mono';
                    ctx.fillText(f, x, startY + 28);
                });

                // Largest factor indicator
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 11px JetBrains Mono';
                ctx.fillText('↑ 6857', w - 35, h - 10);
            }

            draw();
            setInterval(() => { highlight = (highlight + 1) % 4; draw(); }, 600);
        })();

        // 004: Palíndromos
        (function() {
            const c = setupCanvas('preview-004');
            if (!c) return;
            const { ctx, w, h } = c;

            const palindromes = ['906609', '824428', '793397', '649946'];
            let current = 0;
            let charIndex = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const p = palindromes[current];
                const charW = 18;
                const startX = (w - p.length * charW) / 2;

                for (let i = 0; i < p.length; i++) {
                    const mirror = p.length - 1 - i;
                    const isHighlight = i === charIndex || mirror === charIndex;
                    const isPair = i <= charIndex && mirror >= p.length - 1 - charIndex;

                    ctx.fillStyle = isPair ? 'rgba(59, 130, 246, 0.2)' : 'transparent';
                    ctx.fillRect(startX + i * charW - 2, h/2 - 15, charW, 30);

                    ctx.fillStyle = isHighlight ? '#3b82f6' : '#9ca3af';
                    ctx.font = `${isHighlight ? 'bold ' : ''}16px JetBrains Mono`;
                    ctx.textAlign = 'center';
                    ctx.fillText(p[i], startX + i * charW + charW/2, h/2 + 5);
                }

                // Mirror line
                ctx.strokeStyle = '#3b82f630';
                ctx.setLineDash([4, 4]);
                ctx.beginPath();
                ctx.moveTo(w/2, h/2 - 25);
                ctx.lineTo(w/2, h/2 + 25);
                ctx.stroke();
                ctx.setLineDash([]);

                // Formula
                ctx.fillStyle = '#4b5563';
                ctx.font = '9px JetBrains Mono';
                ctx.fillText('913 × 993 = 906609', w/2, h - 12);
            }

            draw();
            setInterval(() => {
                charIndex++;
                if (charIndex >= 3) {
                    charIndex = 0;
                    current = (current + 1) % palindromes.length;
                }
                draw();
            }, 400);
        })();

        // 005: LCM - Divisibility grid
        (function() {
            const c = setupCanvas('preview-005');
            if (!c) return;
            const { ctx, w, h } = c;

            let checkNum = 2520;
            let divisor = 1;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Number being checked
                ctx.fillStyle = '#3b82f6';
                ctx.font = 'bold 16px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(checkNum.toLocaleString(), w/2, 22);

                // Divisibility grid
                const cols = 10;
                const size = 16;
                const gap = 4;
                const startX = (w - cols * (size + gap)) / 2;
                const startY = 38;

                for (let i = 1; i <= 20; i++) {
                    const row = Math.floor((i - 1) / cols);
                    const col = (i - 1) % cols;
                    const x = startX + col * (size + gap);
                    const y = startY + row * (size + gap);

                    const divides = checkNum % i === 0;
                    const isChecking = i === divisor;

                    ctx.fillStyle = isChecking ? '#fbbf24' : (divides ? '#22c55e' : '#ef4444');
                    if (i > divisor && divisor < 20) ctx.fillStyle = '#1e1e2e';

                    ctx.beginPath();
                    ctx.arc(x + size/2, y + size/2, size/2 - 1, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.fillStyle = (i <= divisor || divisor >= 20) ? '#fff' : '#4b5563';
                    ctx.font = '8px JetBrains Mono';
                    ctx.fillText(i, x + size/2, y + size/2 + 3);
                }
            }

            draw();
            setInterval(() => {
                divisor++;
                if (divisor > 21) divisor = 1;
                draw();
            }, 200);
        })();

        // 006: Sum difference - Visual comparison
        (function() {
            const c = setupCanvas('preview-006');
            if (!c) return;
            const { ctx, w, h } = c;

            let n = 3;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const sumOfSquares = Array.from({length: n}, (_, i) => (i+1)**2).reduce((a,b) => a+b, 0);
                const squareOfSum = Array.from({length: n}, (_, i) => i+1).reduce((a,b) => a+b, 0) ** 2;

                const maxVal = Math.max(sumOfSquares, squareOfSum);
                const barMaxH = h - 40;

                // Sum of squares (left)
                const leftH = (sumOfSquares / maxVal) * barMaxH;
                ctx.fillStyle = '#3b82f6';
                ctx.fillRect(w * 0.2, h - leftH - 20, 30, leftH);

                ctx.fillStyle = '#60a5fa';
                ctx.font = '9px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('Σn²', w * 0.2 + 15, h - 5);
                ctx.fillText(sumOfSquares, w * 0.2 + 15, h - leftH - 25);

                // Square of sum (right)
                const rightH = (squareOfSum / maxVal) * barMaxH;
                ctx.fillStyle = '#22c55e';
                ctx.fillRect(w * 0.65, h - rightH - 20, 30, rightH);

                ctx.fillStyle = '#4ade80';
                ctx.fillText('(Σn)²', w * 0.65 + 15, h - 5);
                ctx.fillText(squareOfSum, w * 0.65 + 15, h - rightH - 25);

                // N indicator
                ctx.fillStyle = '#fbbf24';
                ctx.font = 'bold 12px JetBrains Mono';
                ctx.fillText(`n = ${n}`, w/2, 15);

                // Difference
                ctx.fillStyle = '#f472b6';
                ctx.font = '10px JetBrains Mono';
                ctx.fillText(`Δ = ${squareOfSum - sumOfSquares}`, w/2, h - 5);
            }

            draw();
            setInterval(() => { n = n >= 10 ? 1 : n + 1; draw(); }, 500);
        })();

        // 007: Prime finding
        (function() {
            const c = setupCanvas('preview-007');
            if (!c) return;
            const { ctx, w, h } = c;

            function isPrime(n) {
                if (n < 2) return false;
                for (let i = 2; i * i <= n; i++) if (n % i === 0) return false;
                return true;
            }

            let currentNum = 2;
            let primeCount = 0;
            const primes = [];

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Progress bar
                const progress = primeCount / 30;
                ctx.fillStyle = '#1e1e2e';
                ctx.fillRect(10, 10, w - 20, 8);
                ctx.fillStyle = '#a855f7';
                ctx.fillRect(10, 10, (w - 20) * progress, 8);

                // Current check
                ctx.fillStyle = isPrime(currentNum) ? '#a855f7' : '#4b5563';
                ctx.font = 'bold 20px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(currentNum, w/2, h/2);

                // Found primes
                ctx.font = '8px JetBrains Mono';
                ctx.fillStyle = '#c084fc';
                const last8 = primes.slice(-8);
                last8.forEach((p, i) => {
                    ctx.fillText(p, 15 + i * 28, h - 15);
                });

                // Count
                ctx.fillStyle = '#22c55e';
                ctx.font = '10px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(`#${primeCount}`, w - 10, h - 10);
            }

            draw();
            setInterval(() => {
                currentNum++;
                if (isPrime(currentNum)) {
                    primeCount++;
                    primes.push(currentNum);
                }
                if (primeCount > 30) {
                    currentNum = 2;
                    primeCount = 0;
                    primes.length = 0;
                }
                draw();
            }, 80);
        })();

        // 008: Sliding window
        (function() {
            const c = setupCanvas('preview-008');
            if (!c) return;
            const { ctx, w, h } = c;

            const digits = '7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901699720888093776657273330010533678812202354218097512545405947522435258490771167055601360483958644670632441572215539753697817977846174064955149290862569321978468622482839722413756570560574902614079729686524145351004748216637048440319989000889524345065854122758866688116427171479924442928230863465674813919123162824586178664583591245665294765456828489128831426076900422421902267105562632111110937054421750694165896040807198403850962455444362981230987879927244284909188845801561660979191338754992005240636899125607176060588611646710940507754100225698315520005593572972571636269561882670428252483600823257530420752963450';
            let windowStart = 0;
            const windowSize = 13;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const visibleDigits = 25;
                const charW = w / visibleDigits;

                for (let i = 0; i < visibleDigits; i++) {
                    const idx = (windowStart + i) % digits.length;
                    const inWindow = i >= 5 && i < 5 + windowSize;

                    ctx.fillStyle = inWindow ? 'rgba(236, 72, 153, 0.2)' : 'transparent';
                    ctx.fillRect(i * charW, h/2 - 15, charW, 30);

                    ctx.fillStyle = inWindow ? '#f472b6' : '#4b5563';
                    ctx.font = `${inWindow ? 'bold ' : ''}12px JetBrains Mono`;
                    ctx.textAlign = 'center';
                    ctx.fillText(digits[idx], i * charW + charW/2, h/2 + 4);
                }

                // Window bracket
                ctx.strokeStyle = '#f472b6';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(5 * charW, h/2 - 18);
                ctx.lineTo(5 * charW, h/2 - 22);
                ctx.lineTo((5 + windowSize) * charW, h/2 - 22);
                ctx.lineTo((5 + windowSize) * charW, h/2 - 18);
                ctx.stroke();

                // Product
                let product = 1;
                for (let i = 0; i < windowSize; i++) {
                    product *= parseInt(digits[(windowStart + 5 + i) % digits.length]);
                }

                ctx.fillStyle = '#f472b6';
                ctx.font = '9px JetBrains Mono';
                ctx.fillText(`producto: ${product.toLocaleString()}`, w/2, h - 10);
            }

            draw();
            setInterval(() => { windowStart = (windowStart + 1) % digits.length; draw(); }, 150);
        })();

        // 009: Pythagorean triple
        (function() {
            const c = setupCanvas('preview-009');
            if (!c) return;
            const { ctx, w, h } = c;

            let a = 3, b = 4;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const c_val = Math.sqrt(a*a + b*b);
                const scale = 6;
                const ox = 30, oy = h - 20;

                // Triangle
                ctx.beginPath();
                ctx.moveTo(ox, oy);
                ctx.lineTo(ox + a * scale, oy);
                ctx.lineTo(ox + a * scale, oy - b * scale);
                ctx.closePath();
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Right angle marker
                ctx.strokeStyle = '#4b5563';
                ctx.lineWidth = 1;
                ctx.strokeRect(ox + a * scale - 8, oy - 8, 8, 8);

                // Labels
                ctx.fillStyle = '#60a5fa';
                ctx.font = '10px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`a=${a}`, ox + a * scale / 2, oy + 12);

                ctx.fillStyle = '#4ade80';
                ctx.save();
                ctx.translate(ox + a * scale + 12, oy - b * scale / 2);
                ctx.rotate(-Math.PI/2);
                ctx.fillText(`b=${b}`, 0, 0);
                ctx.restore();

                ctx.fillStyle = '#f472b6';
                ctx.fillText(`c=${c_val.toFixed(1)}`, ox + a * scale / 2 - 10, oy - b * scale / 2 - 5);

                // Formula
                ctx.fillStyle = '#fbbf24';
                ctx.font = '9px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(`${a}² + ${b}² = ${a*a + b*b}`, w - 10, 15);
                ctx.fillText(`a+b+c = ${a + b + Math.round(c_val)}`, w - 10, 28);
            }

            draw();
            setInterval(() => {
                a = a >= 12 ? 3 : a + 1;
                b = a + 1;
                draw();
            }, 400);
        })();

        // 010: Sieve of Eratosthenes
        (function() {
            const c = setupCanvas('preview-010');
            if (!c) return;
            const { ctx, w, h } = c;

            const limit = 100;
            const sieve = new Array(limit + 1).fill(true);
            sieve[0] = sieve[1] = false;
            let currentPrime = 2;
            let marking = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const cols = 20;
                const size = 10;
                const gap = 2;
                const startX = (w - cols * (size + gap)) / 2;

                for (let n = 1; n <= limit; n++) {
                    const row = Math.floor((n - 1) / cols);
                    const col = (n - 1) % cols;
                    const x = startX + col * (size + gap);
                    const y = 5 + row * (size + gap);

                    let color = '#1e1e2e';
                    if (sieve[n]) color = '#a855f7';
                    if (!sieve[n] && n > 1) color = '#4b5563';
                    if (n === currentPrime) color = '#22c55e';
                    if (marking > 0 && n === currentPrime * marking) color = '#ef4444';

                    ctx.fillStyle = color;
                    ctx.fillRect(x, y, size, size);
                }

                // Sum indicator
                const sum = sieve.reduce((acc, isPrime, n) => isPrime ? acc + n : acc, 0);
                ctx.fillStyle = '#c084fc';
                ctx.font = '9px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`Σ primos = ${sum}`, w/2, h - 5);
            }

            draw();
            setInterval(() => {
                if (marking === 0) {
                    // Find next prime
                    do { currentPrime++; } while (currentPrime <= limit && !sieve[currentPrime]);
                    if (currentPrime > Math.sqrt(limit)) currentPrime = 2;
                    marking = 2;
                } else {
                    const composite = currentPrime * marking;
                    if (composite <= limit) {
                        sieve[composite] = false;
                        marking++;
                    } else {
                        marking = 0;
                    }
                }
                draw();
            }, 50);
        })();

        // 011: Grid product - 4 adjacent numbers
        (function() {
            const c = setupCanvas('preview-011');
            if (!c) return;
            const { ctx, w, h } = c;

            // Mini grid 8x8
            const grid = [];
            for (let i = 0; i < 64; i++) grid.push(Math.floor(Math.random() * 90) + 10);

            let pos = 0;
            let dir = 0; // 0: horizontal, 1: vertical, 2: diagonal
            const dirs = [[0,1], [1,0], [1,1], [1,-1]];
            const dirNames = ['→', '↓', '↘', '↙'];

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const cols = 8, size = 14, gap = 2;
                const startX = (w - cols * (size + gap)) / 2;
                const startY = 8;

                const row = Math.floor(pos / cols);
                const col = pos % cols;
                const [dr, dc] = dirs[dir];

                // Get 4 cells in direction
                const cells = [];
                for (let i = 0; i < 4; i++) {
                    const r = row + i * dr, c = col + i * dc;
                    if (r >= 0 && r < 8 && c >= 0 && c < 8) cells.push(r * 8 + c);
                }

                let product = 1;
                cells.forEach(idx => product *= grid[idx]);

                for (let i = 0; i < 64; i++) {
                    const r = Math.floor(i / cols), c = i % cols;
                    const x = startX + c * (size + gap);
                    const y = startY + r * (size + gap);

                    const isHighlight = cells.includes(i);
                    ctx.fillStyle = isHighlight ? '#3b82f6' : '#1a1a24';
                    ctx.fillRect(x, y, size, size);

                    ctx.fillStyle = isHighlight ? '#fff' : '#4b5563';
                    ctx.font = '7px JetBrains Mono';
                    ctx.textAlign = 'center';
                    ctx.fillText(grid[i], x + size/2, y + size/2 + 2);
                }

                // Direction and product
                ctx.fillStyle = '#3b82f6';
                ctx.font = '10px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`${dirNames[dir]} ${product.toLocaleString()}`, w/2, h - 6);
            }

            draw();
            setInterval(() => {
                pos = (pos + 1) % 40;
                if (pos === 0) dir = (dir + 1) % 4;
                draw();
            }, 150);
        })();

        // 012: Triangular numbers with divisors
        (function() {
            const c = setupCanvas('preview-012');
            if (!c) return;
            const { ctx, w, h } = c;

            let n = 1;
            const triangulars = [1];
            for (let i = 2; i <= 20; i++) triangulars.push(triangulars[i-2] + i);

            function countDivisors(num) {
                let count = 0;
                for (let i = 1; i * i <= num; i++) {
                    if (num % i === 0) count += (i * i === num) ? 1 : 2;
                }
                return count;
            }

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const tn = triangulars[n - 1];
                const divs = countDivisors(tn);

                // Draw triangle of dots
                const dotSize = 4;
                const startY = 15;
                for (let row = 1; row <= Math.min(n, 6); row++) {
                    const rowWidth = row * (dotSize + 3);
                    const startX = (w - rowWidth) / 2;
                    for (let col = 0; col < row; col++) {
                        ctx.beginPath();
                        ctx.arc(startX + col * (dotSize + 3) + dotSize/2, startY + (row-1) * (dotSize + 2), dotSize/2, 0, Math.PI * 2);
                        ctx.fillStyle = '#3b82f6';
                        ctx.fill();
                    }
                }

                // Number and divisors
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 14px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(tn, w/2, h - 25);

                ctx.fillStyle = '#fbbf24';
                ctx.font = '10px JetBrains Mono';
                ctx.fillText(`${divs} divisores`, w/2, h - 8);

                // N indicator
                ctx.fillStyle = '#4b5563';
                ctx.font = '8px JetBrains Mono';
                ctx.textAlign = 'left';
                ctx.fillText(`T${n}`, 5, 12);
            }

            draw();
            setInterval(() => { n = n >= 15 ? 1 : n + 1; draw(); }, 400);
        })();

        // 013: Large sum - scrolling digits
        (function() {
            const c = setupCanvas('preview-013');
            if (!c) return;
            const { ctx, w, h } = c;

            const nums = [
                '37107287533902102798797998220837590246510135740250',
                '46376937677490009712648124896970078050417018260538',
                '74324986199524741059474233309513058123726617309629'
            ];
            let scroll = 0;
            let highlight = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Show 3 numbers scrolling
                nums.forEach((num, idx) => {
                    const y = 20 + idx * 18;
                    const visibleDigits = 20;
                    const start = scroll % (num.length - visibleDigits);

                    ctx.font = '10px JetBrains Mono';
                    ctx.textAlign = 'left';

                    for (let i = 0; i < visibleDigits; i++) {
                        const digit = num[(start + i) % num.length];
                        const x = 10 + i * 9;
                        const isHighlight = i < 10 && idx === highlight;
                        ctx.fillStyle = isHighlight ? '#ec4899' : '#4b5563';
                        ctx.fillText(digit, x, y);
                    }
                });

                // Result preview
                ctx.fillStyle = '#ec4899';
                ctx.font = 'bold 11px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('5537376230...', w/2, h - 10);

                // Plus signs
                ctx.fillStyle = '#22c55e';
                ctx.font = '12px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText('+', w - 5, 20);
                ctx.fillText('+', w - 5, 38);
                ctx.fillText('=', w - 5, 56);
            }

            draw();
            setInterval(() => {
                scroll++;
                highlight = (highlight + 1) % 3;
                draw();
            }, 120);
        })();

        // 014: Collatz sequence - mountain visualization
        (function() {
            const c = setupCanvas('preview-014');
            if (!c) return;
            const { ctx, w, h } = c;

            function collatz(n) {
                const seq = [n];
                while (n !== 1 && seq.length < 50) {
                    n = n % 2 === 0 ? n / 2 : 3 * n + 1;
                    seq.push(n);
                }
                return seq;
            }

            let startNum = 13;
            let step = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const seq = collatz(startNum);
                const maxVal = Math.max(...seq);
                const scaleY = (h - 30) / Math.log(maxVal + 1);
                const scaleX = (w - 20) / seq.length;

                // Draw path
                ctx.beginPath();
                ctx.moveTo(10, h - 15 - Math.log(seq[0] + 1) * scaleY);

                for (let i = 1; i < seq.length; i++) {
                    const x = 10 + i * scaleX;
                    const y = h - 15 - Math.log(seq[i] + 1) * scaleY;
                    ctx.lineTo(x, y);
                }
                ctx.strokeStyle = '#22c55e';
                ctx.lineWidth = 1.5;
                ctx.stroke();

                // Highlight current point
                const currentIdx = step % seq.length;
                const cx = 10 + currentIdx * scaleX;
                const cy = h - 15 - Math.log(seq[currentIdx] + 1) * scaleY;

                ctx.beginPath();
                ctx.arc(cx, cy, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#fbbf24';
                ctx.fill();

                // Info
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 10px JetBrains Mono';
                ctx.textAlign = 'left';
                ctx.fillText(`n=${startNum}`, 5, 12);

                ctx.fillStyle = '#4b5563';
                ctx.font = '9px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(`${seq.length} pasos`, w - 5, 12);

                ctx.fillStyle = '#fbbf24';
                ctx.textAlign = 'center';
                ctx.fillText(seq[currentIdx], cx, cy - 8);
            }

            draw();
            setInterval(() => {
                step++;
                if (step % 30 === 0) startNum = [13, 27, 97, 871, 6171][Math.floor(Math.random() * 5)];
                draw();
            }, 100);
        })();

        // 015: Lattice paths - grid with animated path
        (function() {
            const c = setupCanvas('preview-015');
            if (!c) return;
            const { ctx, w, h } = c;

            const gridSize = 6;
            let path = [];
            let pathIndex = 0;

            function generatePath() {
                path = [[0, 0]];
                let x = 0, y = 0;
                while (x < gridSize || y < gridSize) {
                    if (x >= gridSize) y++;
                    else if (y >= gridSize) x++;
                    else if (Math.random() > 0.5) x++;
                    else y++;
                    path.push([x, y]);
                }
            }
            generatePath();

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const cellSize = 14;
                const startX = (w - gridSize * cellSize) / 2;
                const startY = (h - gridSize * cellSize) / 2;

                // Draw grid
                ctx.strokeStyle = '#1a1a24';
                ctx.lineWidth = 1;
                for (let i = 0; i <= gridSize; i++) {
                    ctx.beginPath();
                    ctx.moveTo(startX + i * cellSize, startY);
                    ctx.lineTo(startX + i * cellSize, startY + gridSize * cellSize);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(startX, startY + i * cellSize);
                    ctx.lineTo(startX + gridSize * cellSize, startY + i * cellSize);
                    ctx.stroke();
                }

                // Draw path up to current index
                const visiblePath = path.slice(0, pathIndex + 1);
                if (visiblePath.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(startX + visiblePath[0][0] * cellSize, startY + visiblePath[0][1] * cellSize);
                    for (let i = 1; i < visiblePath.length; i++) {
                        ctx.lineTo(startX + visiblePath[i][0] * cellSize, startY + visiblePath[i][1] * cellSize);
                    }
                    ctx.strokeStyle = '#f59e0b';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }

                // Current position
                const [px, py] = path[pathIndex];
                ctx.beginPath();
                ctx.arc(startX + px * cellSize, startY + py * cellSize, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#f59e0b';
                ctx.fill();

                // Start and end markers
                ctx.beginPath();
                ctx.arc(startX, startY, 3, 0, Math.PI * 2);
                ctx.fillStyle = '#22c55e';
                ctx.fill();

                ctx.beginPath();
                ctx.arc(startX + gridSize * cellSize, startY + gridSize * cellSize, 3, 0, Math.PI * 2);
                ctx.fillStyle = '#ef4444';
                ctx.fill();

                // Count
                ctx.fillStyle = '#f59e0b';
                ctx.font = '9px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText('137,846,528,820 rutas', w/2, h - 5);
            }

            draw();
            setInterval(() => {
                pathIndex++;
                if (pathIndex >= path.length) {
                    generatePath();
                    pathIndex = 0;
                }
                draw();
            }, 150);
        })();

        // 016: Power digit sum - 2^n growing
        (function() {
            const c = setupCanvas('preview-016');
            if (!c) return;
            const { ctx, w, h } = c;

            let exp = 1;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Calculate 2^exp (limited for display)
                const power = BigInt(2) ** BigInt(exp);
                const powerStr = power.toString();
                const digitSum = powerStr.split('').reduce((a, b) => a + parseInt(b), 0);

                // Exponent display
                ctx.fillStyle = '#3b82f6';
                ctx.font = 'bold 16px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`2`, w/2 - 15, 25);

                ctx.fillStyle = '#60a5fa';
                ctx.font = 'bold 10px JetBrains Mono';
                ctx.fillText(exp, w/2, 18);

                // Result (truncated)
                ctx.fillStyle = '#4b5563';
                ctx.font = '9px JetBrains Mono';
                const display = powerStr.length > 20
                    ? powerStr.slice(0, 10) + '...' + powerStr.slice(-8)
                    : powerStr;
                ctx.fillText(display, w/2, h/2 + 5);

                // Digit sum
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 12px JetBrains Mono';
                ctx.fillText(`Σ = ${digitSum}`, w/2, h - 12);

                // Digit count
                ctx.fillStyle = '#4b5563';
                ctx.font = '8px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(`${powerStr.length} dígitos`, w - 5, 12);
            }

            draw();
            setInterval(() => {
                exp = exp >= 100 ? 1 : exp + 3;
                draw();
            }, 150);
        })();

        // 017: Number letter counts
        (function() {
            const c = setupCanvas('preview-017');
            if (!c) return;
            const { ctx, w, h } = c;

            const words = {
                1: 'one', 2: 'two', 3: 'three', 4: 'four', 5: 'five',
                6: 'six', 7: 'seven', 8: 'eight', 9: 'nine', 10: 'ten',
                11: 'eleven', 12: 'twelve', 13: 'thirteen', 14: 'fourteen',
                15: 'fifteen', 16: 'sixteen', 17: 'seventeen', 18: 'eighteen',
                19: 'nineteen', 20: 'twenty', 30: 'thirty', 40: 'forty',
                50: 'fifty', 100: 'one hundred', 342: 'three hundred and forty-two',
                1000: 'one thousand'
            };
            const nums = [1, 5, 12, 20, 42, 100, 342, 1000];
            let idx = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const num = nums[idx];
                const word = words[num] || num.toString();
                const letters = word.replace(/[\s-]/g, '').length;

                // Number
                ctx.fillStyle = '#ec4899';
                ctx.font = 'bold 20px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(num, w/2, 30);

                // Word
                ctx.fillStyle = '#f472b6';
                ctx.font = '11px JetBrains Mono';
                const displayWord = word.length > 25 ? word.slice(0, 22) + '...' : word;
                ctx.fillText(displayWord, w/2, h/2 + 5);

                // Letter count
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 12px JetBrains Mono';
                ctx.fillText(`${letters} letras`, w/2, h - 10);
            }

            draw();
            setInterval(() => { idx = (idx + 1) % nums.length; draw(); }, 700);
        })();

        // 018: Maximum path sum - triangle
        (function() {
            const c = setupCanvas('preview-018');
            if (!c) return;
            const { ctx, w, h } = c;

            const triangle = [
                [75],
                [95, 64],
                [17, 47, 82],
                [18, 35, 87, 10],
                [20, 4, 82, 47, 65]
            ];
            let pathChoice = [0, 0, 1, 2, 2]; // Best path indices
            let step = 0;

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const rows = triangle.length;
                const cellH = (h - 25) / rows;

                let sum = 0;
                for (let r = 0; r < rows; r++) {
                    const row = triangle[r];
                    const cellW = w / (row.length + 1);

                    for (let c = 0; c < row.length; c++) {
                        const x = cellW * (c + 1);
                        const y = 12 + r * cellH;

                        const isPath = c === pathChoice[r] && r <= step;
                        if (isPath) sum += row[c];

                        ctx.beginPath();
                        ctx.arc(x, y, 12, 0, Math.PI * 2);
                        ctx.fillStyle = isPath ? '#3b82f6' : '#1a1a24';
                        ctx.fill();

                        ctx.fillStyle = isPath ? '#fff' : '#4b5563';
                        ctx.font = '9px JetBrains Mono';
                        ctx.textAlign = 'center';
                        ctx.fillText(row[c], x, y + 3);
                    }
                }

                // Sum
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 11px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`Σ = ${sum}`, w/2, h - 5);
            }

            draw();
            setInterval(() => {
                step = (step + 1) % 6;
                if (step === 0) {
                    // Randomize path slightly
                    pathChoice = pathChoice.map((p, i) =>
                        Math.max(0, Math.min(i, p + (Math.random() > 0.5 ? 0 : (Math.random() > 0.5 ? 1 : -1))))
                    );
                }
                draw();
            }, 300);
        })();

        // 019: Counting Sundays - calendar
        (function() {
            const c = setupCanvas('preview-019');
            if (!c) return;
            const { ctx, w, h } = c;

            const months = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
            let year = 1901;
            let month = 0;
            let sundayCount = 0;

            // Calculate if 1st of month is Sunday (simplified)
            function isFirstSunday(y, m) {
                const d = new Date(y, m, 1);
                return d.getDay() === 0;
            }

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Year
                ctx.fillStyle = '#3b82f6';
                ctx.font = 'bold 14px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(year, w/2, 18);

                // Calendar grid (3x4 months)
                const cellW = w / 4;
                const cellH = 18;
                const startY = 30;

                for (let m = 0; m < 12; m++) {
                    const row = Math.floor(m / 4);
                    const col = m % 4;
                    const x = col * cellW + cellW / 2;
                    const y = startY + row * cellH;

                    const isSunday = isFirstSunday(year, m);
                    const isCurrent = m === month;

                    ctx.fillStyle = isSunday ? '#ef4444' : (isCurrent ? '#fbbf24' : '#4b5563');
                    ctx.font = `${isCurrent ? 'bold ' : ''}9px JetBrains Mono`;
                    ctx.textAlign = 'center';
                    ctx.fillText(months[m], x, y);

                    if (isSunday) {
                        ctx.beginPath();
                        ctx.arc(x, y + 5, 2, 0, Math.PI * 2);
                        ctx.fillStyle = '#ef4444';
                        ctx.fill();
                    }
                }

                // Count
                ctx.fillStyle = '#ef4444';
                ctx.font = 'bold 11px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`${sundayCount} domingos`, w/2, h - 6);
            }

            draw();
            setInterval(() => {
                if (isFirstSunday(year, month)) sundayCount++;
                month++;
                if (month >= 12) {
                    month = 0;
                    year++;
                }
                if (year > 2000) {
                    year = 1901;
                    month = 0;
                    sundayCount = 0;
                }
                draw();
            }, 50);
        })();

        // 020: Factorial digit sum
        (function() {
            const c = setupCanvas('preview-020');
            if (!c) return;
            const { ctx, w, h } = c;

            let n = 1;

            function factorial(num) {
                let result = BigInt(1);
                for (let i = 2; i <= num; i++) result *= BigInt(i);
                return result;
            }

            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                const fact = factorial(n);
                const factStr = fact.toString();
                const digitSum = factStr.split('').reduce((a, b) => a + parseInt(b), 0);

                // n!
                ctx.fillStyle = '#a855f7';
                ctx.font = 'bold 18px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`${n}!`, w/2, 25);

                // Result (truncated)
                ctx.fillStyle = '#4b5563';
                ctx.font = '8px JetBrains Mono';
                const display = factStr.length > 25
                    ? factStr.slice(0, 12) + '...' + factStr.slice(-10)
                    : factStr;
                ctx.fillText(display, w/2, h/2 + 3);

                // Digit sum
                ctx.fillStyle = '#22c55e';
                ctx.font = 'bold 12px JetBrains Mono';
                ctx.fillText(`Σ = ${digitSum}`, w/2, h - 12);

                // Digit count
                ctx.fillStyle = '#c084fc';
                ctx.font = '8px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(`${factStr.length} dígitos`, w - 5, 12);
            }

            draw();
            setInterval(() => {
                n = n >= 100 ? 1 : n + 2;
                draw();
            }, 150);
        })();

        // Filter functionality
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active', 'bg-gray-900', 'text-gray-300'));
                btn.classList.add('active', 'bg-gray-900', 'text-gray-300');

                const filter = btn.dataset.filter;
                document.querySelectorAll('#problems-grid article').forEach(card => {
                    if (filter === 'all' || card.dataset.category === filter) {
                        card.parentElement.style.display = 'block';
                    } else {
                        card.parentElement.style.display = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>
